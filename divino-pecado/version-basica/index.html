<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Divino Pecado</title>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Google Fonts: Montserrat & Lust Slim -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet" />
  <!-- En tu <head>, a√±ade esto: -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet" />

  <!-- Tu hoja de estilos -->
  <link rel="stylesheet" href="style.css" />

  <!-- Estilos personalizados -->
  <style>
    /* Tipograf√≠a general */
    body {
      font-family: 'Montserrat', sans-serif;
      background-color: #89d1f6 !important;
    }

    /* Tipograf√≠a decorativa solo para el t√≠tulo */
    .titulo-logo {
      font-family: 'Lust Slim', serif;
    }

    /* Botones globales */
    button {
      background-color: #89d1f6 !important;
      color: white !important;
      cursor: default !important;
      border: none !important;
      box-shadow: none !important;
    }

    /* Contadores personalizados */
    .counter {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .counter button {
      padding: 0.2rem 0.6rem;
      background-color: #89d1f6 !important;
      color: white !important;
      border-radius: 0.375rem;
    }

    /* Remover colores de error y hover verdes */
    .hover\:bg-green-600:hover {
      background-color: #89d1f6 !important;
    }

    .error-border {
      border-color: #ef4444 !important;
    }
    
  .neon-vinotinto {
  color: #89d1f6;
  text-shadow:
    0 0 4px #89d1f6,
    0 0 8px #89d1f6,
    0 0 16px #89d1f6,
    0 0 32px #89d1f6;
}



  </style>
</head>



<body class="overflow-hidden">
  <!-- Pantalla de cuenta regresiva -->
  <div id="pantallaCuentaRegresiva" class="fixed inset-0 z-50 flex items-center justify-center bg-transparent">
    <video autoplay muted loop class="absolute inset-0 w-full h-full object-cover z-0">
      <source src="img/divino-vid.mp4" type="video/mp4">
      Tu navegador no soporta video.
    </video>

    <div class="absolute top-4 sm:top-10 left-1/2 transform -translate-x-1/2 z-10 text-3xl sm:text-5xl md:text-6xl lg:text-7xl text-center scale-100 sm:scale-[1.3] md:scale-[1.6] lg:scale-[1.9] neon-vinotinto" style="font-family: 'Playfair Display', serif;">
      <div id="cuentaRegresiva"></div>
    </div>

    <div class="absolute bottom-4 sm:bottom-10 left-1/2 transform -translate-x-1/2 z-10 text-xl sm:text-3xl md:text-5xl lg:text-6xl text-center whitespace-nowrap neon-vinotinto" style="font-family: 'Playfair Display', serif;">
      ¬°Falta poco para pecar juntos!
    </div>
  </div>

  <!-- Pantalla de bienvenida -->
  <div id="pantallaBienvenida" class="hidden fixed inset-0 z-50 bg-[#89d1f6] flex flex-col items-center justify-center">
    <img src="img/logo-divino.png" alt="Logo Divino Pecado" class="w-80 mb-10">
    <button onclick="mostrarContenido()" class="bg-[#89d1f6] text-white font-semibold px-6 py-3 rounded-full shadow-lg hover:bg-[#68b8e0] transition">
      Entrar
    </button>
  </div>

  <!-- Contenido principal -->
  <div id="contenidoPrincipal" class="hidden">
    <!-- Tu contenido aqu√≠ -->
  <div class="max-w-3xl mx-auto mt-10 p-6 bg-white rounded-xl shadow-md space-y-6">
    <h1 class="text-5xl font-bold text-center" style="font-family: 'Playfair Display', serif;">
  ¬°Bienvenido a Divino Pecado!
</h1>


    <!-- Informaci√≥n personal -->
    <!-- Nombre -->
<label class="block">
  <span class="text-gray-700">Dinos tu nombre y apellido:</span>
  <input id="nombre" type="text" class="mt-1 block w-full border border-gray-300 rounded-md p-2" required />
</label>

<!-- Tel√©fono -->
<label class="block">
  <span class="text-gray-700">Donde te contactamos? (cel):</span>
  <input id="telefono" type="tel" class="mt-1 block w-full border border-gray-300 rounded-md p-2" required />
</label>


<div class="flex justify-center mb-6">
  <img src="img/Men√∫.jpg" alt="Men√∫ Divino Pecado" class="w-[85%] max-w-3xl rounded-lg shadow-lg" />
</div>

<label class="block">
  <span class="text-gray-700">Universidad donde vas a recoger tu pedido:</span>
  <select id="universidad" class="mt-1 block w-full border border-gray-300 rounded-md p-2" required>
    <option value="">Selecciona tu universidad</option>
    <option value="Javeriana">Edificio Arca, Javeriana</option>
    <option value="Andes">Los Andes</option>
    <option value="Externado">Externado</option>
    <option value="Distrital">Edificio de ingenieria, U Distrital</option>
    <option value="Terpel">Edificio principal Terpel Cra. 7ma</option>
    <option value="empresarial">Empresarial</option>
  </select>
</label>

 <!-- Hora -->
<label class="block">
  <span class="text-gray-700">¬øA qu√© hora vas a recoger tu pedido?</span>
  <select id="hora" class="mt-1 block w-full border border-gray-300 rounded-md p-2" required>
    <option value="">Selecciona una hora</option>
    <option value="12:00">12:00</option>
    <option value="13:00">13:00</option>
    <option value="14:00">14:00</option>
  </select>
</label>


    <label class="block">
      <span class="text-gray-700">¬øQue se te antoja hoy?</span>
      <select id="opcion" onchange="mostrarMenu()" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
      <option value="">Selecciona una opci√≥n</option>
      <option value="bowl">Bowl</option>
      <option value="sandwich">Sandwich</option>
      <option value="papaslocas">Papas Locas</option>
      <option value="nachos">Nachos</option>
      </select>
    </label>

    <!-- Contenedor din√°mico de men√∫ -->
    <div id="contenedorMenu" class="space-y-4"></div>
    <!-- Imagen del producto seleccionado -->
<div id="imagenProducto" class="mt-4 text-center">
  <img id="imgSeleccionada" src="" alt="Producto seleccionado" class="mx-auto max-h-[400px] w-auto hidden rounded-xl shadow-lg" />
</div>


    <!-- Adiciones globales -->
    <div class="space-y-4">
      <h2 class="text-xl font-bold text-gray-700">Adiciones</h2>

      <label class="block">
        <span class="text-gray-700">¬øDeseas a√±adir chips papas artesanales de 50 gramos? ($5.000)</span>
        <select id="adicionPapas" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
          <option value="no">Nahh.</option>
          <option value="si">Ofende la pregunta.</option>
        </select>
      </label>

      <label class="block">
        <span class="text-gray-700">¬øDeseas ensalada insignia? ($7.000) Contiene : Lechuga asiatica, tomate cherry , rabanos, zanahoria, queso paipa¬†y¬†vinagreta</span>
        <select id="adicionEnsalada" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
          <option value="no">No</option>
          <option value="si">S√≠</option>
        </select>
      </label>

      <label class="block">
  <span class="text-gray-700">¬øDeseas adicionar una bebida??</span>
  <select id="adicionBebida" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
    <option value="">No gracias</option>
    <option value="Agua Cristal (600 ml)">Agua Cristal (600 ml) - $3.500</option>
    <option value="Agua Cristal con gas (600 ml)">Agua Cristal con gas (600 ml) - $3.500</option>
    <option value="Coca-Cola original (400 ml)">Coca-Cola original (400 ml) - $4.500</option>
    <option value="Coca-Cola zero (400 ml)">Coca-Cola zero (400 ml) - $4.000</option>
    <option value="H2O (250 ml)">H2O (250 ml) - $3.000</option>
    <option value="Agua Brisa (250 ml)">Agua Brisa (250 ml) - $3.000</option>
    <option value="Pony Malta mini">Pony Malta mini - $3.000</option>
  </select>
</label>


      <label class="block">
        <span class="text-gray-700">Un toque de dulce? Prueba nuestros postres!! ($7.000)</span>
        <select id="adicionPostre" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
          <option value="">Hoy paso...</option>
          <option value="Lim√≥n">Lim√≥n</option>
          <option value="Maracuy√°">Maracuy√°</option>
          <option value="Frutos rojos">Frutos rojos</option>
          <option value="Limonada de coco">Limonada de coco</option>
        </select>
        <!-- Imagen del postre seleccionado -->
<div id="imagenPostre" class="mt-4 text-center">
  <img id="imgPostreSeleccionado" src="" alt="Imagen del postre" class="mx-auto max-h-64 hidden rounded shadow-md" />
</div>

      </label>
    </div>

    <!-- Bot√≥n para agregar al carrito -->
    <div class="text-center">
      <button onclick="agregarAlCarritoDesdeSeleccion()" class="bg-green-600 text-white px-4 py-2 rounded">A√±adir al carrito</button>
    </div>
  </div>

  <!-- Carrito de pedidos -->
  <div id="carrito" class="max-w-3xl mx-auto mt-6 p-4 bg-white rounded-xl shadow-md hidden">
    <h2 class="text-2xl font-bold mb-4 text-center text-green-700">üõí Carrito</h2>
    <ul id="listaCarrito" class="space-y-2"></ul>
    <div class="flex justify-between items-center mt-4">
      <p class="font-bold text-lg">Total: <span id="totalCarrito">$0</span></p>
      <button onclick="efectuarPago()" class="bg-green-600 text-white px-4 py-2 rounded">Confirmar pedido</button>

    </div>
  </div>

<div id="seccionConfirmacion" class="hidden text-center mt-6 space-y-6 max-w-xl mx-auto bg-white p-6 rounded-lg shadow-lg border">
  <p class="text-green-600 text-xl font-semibold">
    ‚úÖ ¬°Tu pedido fue enviado correctamente!<br>
    Por favor recuerda despu√©s de enviar el comprobante al grupo darle click al bot√≥n de confirmar pedido final!!!  
  </p>

  <div>
    <p class="text-gray-700 text-base mb-2">1Ô∏è‚É£ Escanea este c√≥digo QR para pagar por Nequi:
      (Si no te funciona puedes hacerlo al siguiente n√∫mero!! +57 3208377248)
    </p>
    <img src="img/qr-nequi.png" alt="QR Nequi" class="mx-auto w-64 h-auto rounded-lg shadow-md border" />
  </div>

  <p class="text-gray-700 text-base">2Ô∏è‚É£ Luego, env√≠a el comprobante al grupo de WhatsApp seg√∫n tu universidad:</p>

  <a id="btnWhatsapp" href="#" target="_blank" class="inline-block bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg shadow transition">
    Ir al grupo de WhatsApp
  </a>
<!-- Resumen final del pedido (para Google Sheets) -->
<div id="resumenPedidoFinal" class="p-4 text-white text-sm"></div>

  <!-- ‚úÖ Bot√≥n que env√≠a a Google Sheets -->
<div class="mt-4">
  <button onclick="confirmarPedidoFinal()" class="bg-green-600 text-white px-4 py-2 rounded">
    Confirmar Pedido Final
  </button>
</div>



  <script>
  const contenedorMenu = document.getElementById('contenedorMenu');

  function mostrarMenu() {
    const opcion = document.getElementById("opcion").value;
    contenedorMenu.innerHTML = "";
    mostrarImagen(""); // Oculta imagen general

    // Oculta imagen de sandwich si se cambia a otra categor√≠a
const imgSandwich = document.getElementById("imgSandwich");
if (imgSandwich) {
  imgSandwich.classList.add("hidden");
  imgSandwich.src = "";
}

    if (opcion === "bowl") {
      contenedorMenu.innerHTML = `
        <label class="block">
          <span class="text-gray-700">Selecciona tu tipo de bowl:</span>
          <select id="tipoBowl" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
            <option value="">Selecciona una opci√≥n</option>
            <option value="semana">Bowl de la semana - $18.000</option>
            <option value="armar">Arma tu bowl - $21.000</option>
          </select>
        </label>
        <div id="bowlOpciones" class="mt-4"></div>
      `;
      document.getElementById("tipoBowl").addEventListener("change", mostrarOpcionesBowl);
      } else if (opcion === "sandwich") {
  contenedorMenu.innerHTML = `
    <label class="block">
      <span class="text-gray-700">Selecciona tu sandwich:</span>
      <select id="tipoSandwich" onchange="mostrarImagenSandwich()" class="mt-1 block w-full border border-gray-300 rounded-md p-2">
  <option value="Seneca">Seneca</option>
  <option value="Anglicano">Anglicano</option>
  <option value="Paraiso">Para√≠so</option>
  <option value="Mammon">Mammon</option>
  <option value="Averno">Averno</option>
</select>
    </label>`;
  mostrarImagen(""); // limpia si cambia a sandwich pero a√∫n no selecciona
 } else if (opcion === "nachos") {
  mostrarImagen("nachos.jpg");
  contenedorMenu.innerHTML = `
    <div class="space-y-6"> <!-- Espaciado vertical entre secciones -->

      <!-- Prote√≠nas -->
      <label class="block">
        <span class="text-gray-700 font-bold text-lg">Prote√≠na (1 incluida, adicionales +$6.000):</span>
        <div class="space-y-2 mt-2">
          ${generarControlesProteinas("nachoprot")}
        </div>
      </label>

      <!-- Toppings -->
      <label class="block">
        <span class="text-gray-700 font-bold text-lg">Toppings (4 incluidos, adicionales +$2.500):</span>
        <div class="space-y-2 mt-2">
          ${generarControlesToppings("nachotop")}
        </div>
      </label>

    </div>
  `;

  } else if (opcion === "papaslocas") {
  mostrarImagen("papaslocas.png");
  contenedorMenu.innerHTML = `
    <div class="space-y-6">

      <!-- Prote√≠nas -->
      <label class="block">
        <span class="text-gray-700 font-bold text-lg">Prote√≠na (1 incluida, adicionales +$6.000):</span>
        <div class="space-y-2 mt-2">
          ${generarControlesProteinas("papasprot")}
        </div>
      </label>

      <!-- Toppings -->
      <label class="block">
        <span class="text-gray-700 font-bold text-lg">Toppings (3 incluidos, adicionales +$2.500):</span>
        <div class="space-y-2 mt-2">
          ${generarControlesToppings("papastop")}
        </div>
      </label>

      <!-- Tipo de papas locas -->
      <label class="block">
        <span class="text-gray-700 font-bold text-lg">¬øQu√© tipo de papas locas prefieres?</span>
        <select id="tipoPapasLocas" class="mt-2 block w-full border border-gray-300 rounded-md p-2">
          <option value="">Selecciona una opci√≥n</option>
          <option value="Chips">Chips</option>
          <option value="Criollas">Criollas</option>
        </select>
      </label>

    </div>
  `;
}}




  function mostrarOpcionesBowl() {
  const tipo = document.getElementById("tipoBowl").value;
    // Ocultar imagen del bowl anterior si existe
const imgBowl = document.getElementById("imgSeleccionada");
if (imgBowl) {
  imgBowl.classList.add("hidden");
  imgBowl.src = "";
}
    const contenedor = document.getElementById("bowlOpciones");
    contenedor.innerHTML = "";

    if (tipo === "semana") {
  contenedor.innerHTML = `
    <label class="block">
      <span class="text-gray-700">Elige opci√≥n de la semana:</span>
      <select class="mt-1 block w-full border border-gray-300 rounded-md p-2">
        <option>Criollo</option>
        <option>Italiano</option>
      </select>
    </label>`;

  const selectBowlSemana = contenedor.querySelector("select");
  selectBowlSemana.addEventListener("change", () => {
    const seleccion = selectBowlSemana.value.toLowerCase();
    mostrarImagen(`${seleccion}.jpg`);
  });
    } else if (tipo === "armar") {
      contenedor.innerHTML = `
  <div class="space-y-6">
  <!-- Base -->
  <label class="block">
    <span class="text-gray-900 font-bold text-lg">Base 1 incluida ($4.500 C/U Adicional):</span>
    <div class="space-y-2 mt-2">
      <div class="flex justify-between items-center">
        <span>Arroz</span>
        <div class="flex items-center gap-2">
          <button onclick="cambiar('base1', -1)" class="px-2 bg-gray-200 rounded">‚àí</button>
          <span id="base1" class="min-w-[20px] text-center">0</span>
          <button onclick="cambiar('base1', 1)" class="px-2 bg-gray-200 rounded">+</button>
        </div>
      </div>
      <div class="flex justify-between items-center">
        <span>Arroz integral</span>
        <div class="flex items-center gap-2">
          <button onclick="cambiar('base2', -1)" class="px-2 bg-gray-200 rounded">‚àí</button>
          <span id="base2" class="min-w-[20px] text-center">0</span>
          <button onclick="cambiar('base2', 1)" class="px-2 bg-gray-200 rounded">+</button>
        </div>
      </div>
      <div class="flex justify-between items-center">
        <span>Macarrones</span>
        <div class="flex items-center gap-2">
          <button onclick="cambiar('base3', -1)" class="px-2 bg-gray-200 rounded">‚àí</button>
          <span id="base3" class="min-w-[20px] text-center">0</span>
          <button onclick="cambiar('base3', 1)" class="px-2 bg-gray-200 rounded">+</button>
        </div>
      </div>
      <div class="flex justify-between items-center">
        <span>Lechuga</span>
        <div class="flex items-center gap-2">
          <button onclick="cambiar('base4', -1)" class="px-2 bg-gray-200 rounded">‚àí</button>
          <span id="base4" class="min-w-[20px] text-center">0</span>
          <button onclick="cambiar('base4', 1)" class="px-2 bg-gray-200 rounded">+</button>
        </div>
      </div>
    </div>
  </label>

  <!-- Prote√≠na -->
  <label class="block">
    <span class="text-gray-900 font-bold text-lg">Prote√≠na 1 incluida ($6.000 C/U Adicional):</span>
    <div class="space-y-2 mt-2">
      <div class="flex justify-between items-center"><span>Carne ropa vieja</span><div class="flex items-center gap-2"><button onclick="cambiar('prot1', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="prot1" class="min-w-[20px] text-center">0</span><button onclick="cambiar('prot1', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
      <div class="flex justify-between items-center"><span>Pollo a la plancha</span><div class="flex items-center gap-2"><button onclick="cambiar('prot2', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="prot2" class="min-w-[20px] text-center">0</span><button onclick="cambiar('prot2', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
      <div class="flex justify-between items-center"><span>Pechuga en aj√≠ de gallina</span><div class="flex items-center gap-2"><button onclick="cambiar('prot3', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="prot3" class="min-w-[20px] text-center">0</span><button onclick="cambiar('prot3', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
      <div class="flex justify-between items-center"><span>Carne en cubos</span><div class="flex items-center gap-2"><button onclick="cambiar('prot4', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="prot4" class="min-w-[20px] text-center">0</span><button onclick="cambiar('prot4', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
      <div class="flex justify-between items-center"><span>Alb√≥ndigas</span><div class="flex items-center gap-2"><button onclick="cambiar('prot5', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="prot5" class="min-w-[20px] text-center">0</span><button onclick="cambiar('prot5', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
      <div class="flex justify-between items-center"><span>Cerdo BBQ</span><div class="flex items-center gap-2"><button onclick="cambiar('prot6', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="prot6" class="min-w-[20px] text-center">0</span><button onclick="cambiar('prot6', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
      <div class="flex justify-between items-center"><span>Tartar de pollo</span><div class="flex items-center gap-2"><button onclick="cambiar('prot7', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="prot7" class="min-w-[20px] text-center">0</span><button onclick="cambiar('prot7', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
      <div class="flex justify-between items-center"><span>Carne vegana</span><div class="flex items-center gap-2"><button onclick="cambiar('prot8', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="prot8" class="min-w-[20px] text-center">0</span><button onclick="cambiar('prot8', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
      <div class="flex justify-between items-center"><span>Pollo vegano</span><div class="flex items-center gap-2"><button onclick="cambiar('prot9', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="prot9" class="min-w-[20px] text-center">0</span><button onclick="cambiar('prot9', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
      <div class="flex justify-between items-center"><span>Rollitos primavera</span><div class="flex items-center gap-2"><button onclick="cambiar('prot10', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="prot10" class="min-w-[20px] text-center">0</span><button onclick="cambiar('prot10', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    </div>
  </label>

  <!-- Toppings -->
<label class="block">
  <span class="text-gray-900 font-bold text-lg">Toppings 5 incluidos ($2.500 C/U Adicional):</span>
  <div class="space-y-2 mt-2">
    <div class="flex justify-between items-center"><span>Pico de gallo</span><div class="flex items-center gap-2"><button onclick="cambiar('top1', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top1" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top1', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Ma√≠z tierno</span><div class="flex items-center gap-2"><button onclick="cambiar('top2', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top2" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top2', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Guacamole</span><div class="flex items-center gap-2"><button onclick="cambiar('top3', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top3" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top3', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Lechuga en julianas</span><div class="flex items-center gap-2"><button onclick="cambiar('top4', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top4" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top4', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Sour cream</span><div class="flex items-center gap-2"><button onclick="cambiar('top5', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top5" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top5', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Pimentones</span><div class="flex items-center gap-2"><button onclick="cambiar('top6', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top6" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top6', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Queso doble crema</span><div class="flex items-center gap-2"><button onclick="cambiar('top7', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top7" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top7', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Cebolla de la casa</span><div class="flex items-center gap-2"><button onclick="cambiar('top8', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top8" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top8', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Zanahoria de la casa</span><div class="flex items-center gap-2"><button onclick="cambiar('top9', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top9" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top9', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Pl√°tano maduro</span><div class="flex items-center gap-2"><button onclick="cambiar('top10', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top10" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top10', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Jalape√±os</span><div class="flex items-center gap-2"><button onclick="cambiar('top11', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top11" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top11', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Frijoles</span><div class="flex items-center gap-2"><button onclick="cambiar('top12', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top12" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top12', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Pepinillos</span><div class="flex items-center gap-2"><button onclick="cambiar('top13', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top13" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top13', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Hogao</span><div class="flex items-center gap-2"><button onclick="cambiar('top14', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top14" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top14', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
    <div class="flex justify-between items-center"><span>Br√≥coli</span><div class="flex items-center gap-2"><button onclick="cambiar('top15', -1)" class="px-2 bg-gray-200 rounded">‚àí</button><span id="top15" class="min-w-[20px] text-center">0</span><button onclick="cambiar('top15', 1)" class="px-2 bg-gray-200 rounded">+</button></div></div>
  </div>
</label>
<!-- Bebida incluida -->
<label class="block mt-6">
  <span class="text-gray-900 font-bold text-lg">Bebida (1 incluida):</span>
  <select id="bebidaBowl" class="mt-2 block w-full border border-gray-300 rounded-md p-2">
    <option value="Agua Cristal (250 ml)">Agua Cristal (250 ml)</option>
    <option value="Agua Cristal con gas (250 ml)">Agua Cristal con gas (250 ml)</option>
    <option value="H2O (250 ml)">H2O (250 ml)</option>
    <option value="Agua Brisa (250 ml)">Agua Brisa (250 ml)</option>
    <option value="Pony Malta mini">Pony Malta mini</option>
    <option value="Gaseosa Postob√≥n Cero">Gaseosa Postob√≥n Cero</option>
  </select>
</label>


  </div>`;
      }
    }

    function cambiar(id, delta) {
    const span = document.getElementById(id);
    let valor = parseInt(span.textContent);
    valor = Math.max(0, valor + delta);
    span.textContent = valor;

    if (carrito.length > 0 && document.getElementById("tipoBowl")?.value === "armar") {
      actualizarAdicionalesEnCarrito();
    }
  }

  function validarProteinas() {
    const proteinas = ['prot1', 'prot2', 'prot3', 'prot4', 'prot5', 'prot6', 'prot7', 'prot8', 'prot9', 'prot10'];
    const total = proteinas.reduce((sum, id) => sum + parseInt(document.getElementById(id).textContent), 0);
    return total > 0;
  }

  function agregarAdicionalesContadores() {
    const adicionales = [];
    const bases = ['base1', 'base2', 'base3', 'base4'];
    let totalBases = bases.reduce((sum, id) => sum + parseInt(document.getElementById(id).textContent), 0);
    if (totalBases > 1) {
      adicionales.push({ nombre: `Adicional bases (${totalBases - 1})`, precio: 4500 * (totalBases - 1), cantidad: 1 });
    }

    const proteinas = ['prot1', 'prot2', 'prot3', 'prot4', 'prot5', 'prot6', 'prot7', 'prot8', 'prot9', 'prot10'];
    let totalProteinas = proteinas.reduce((sum, id) => sum + parseInt(document.getElementById(id).textContent), 0);
    if (totalProteinas > 1) {
      adicionales.push({ nombre: `Adicional prote√≠nas (${totalProteinas - 1})`, precio: 6000 * (totalProteinas - 1), cantidad: 1 });
    }

    const toppings = ['top1','top2','top3','top4','top5','top6','top7','top8','top9','top10','top11','top12','top13','top14','top15'];
    let totalToppings = toppings.reduce((sum, id) => sum + parseInt(document.getElementById(id).textContent), 0);
    if (totalToppings > 5) {
      adicionales.push({ nombre: `Adicional toppings (${totalToppings - 5})`, precio: 2500 * (totalToppings - 5), cantidad: 1 });
    }

    return adicionales;
  }

  function actualizarAdicionalesEnCarrito() {
    carrito = carrito.filter(item => !item.nombre.startsWith("Adicional "));
    const adicionales = agregarAdicionalesContadores();
    adicionales.forEach(item => carrito.push(item));
    actualizarCarrito();
  }
 function efectuarPago() {
  const universidadSelect = document.querySelectorAll('select')[0];
  const universidad = universidadSelect.value.toLowerCase();
  const link = enlacesWhatsapp[universidad];

  const seccionConfirmacion = document.getElementById("seccionConfirmacion");
  const seccionPago = document.getElementById("seccionPago");
  const btnWhatsapp = document.getElementById("btnWhatsapp");

  // Mostrar secci√≥n QR y WhatsApp (sin ocultar el carrito ni otras cosas)
  seccionConfirmacion.classList.remove("hidden");

  // Asignar enlace al bot√≥n de WhatsApp
  if (link) {
    btnWhatsapp.href = link;
    btnWhatsapp.textContent = "Ir al grupo de WhatsApp";
  } else {
    btnWhatsapp.href = "#";
    btnWhatsapp.textContent = "Grupo no disponible";
  }

  // Mostrar bot√≥n final de confirmaci√≥n dentro de la secci√≥n de confirmaci√≥n
  seccionPago.classList.remove("hidden");
  seccionPago.innerHTML = `
    <button onclick="confirmarPedidoFinal()" class="bg-green-600 text-white px-4 py-2 rounded mt-4">
      Confirmar Pedido Final
    </button>
  `;
}


  let carrito = [];

function agregarAlCarritoDesdeSeleccion() {
  const opcion = document.getElementById("opcion").value;
  if (!opcion) {
    alert("‚ùå Selecciona si quieres Bowl, Sandwich, Nachos o Papas Locas");
    return;
  }

  

  if (opcion === "bowl") {
    const tipoBowl = document.getElementById("tipoBowl").value;
    if (!tipoBowl) {
      alert("‚ùå Selecciona el tipo de bowl");
      return;
    }
    if (tipoBowl === "armar" && !validarProteinas()) {
      alert("‚ö†Ô∏è Debes seleccionar al menos 1 prote√≠na");
      return;
    }

    if (tipoBowl === "semana") {
  const seleccion = document.querySelector('#bowlOpciones select');
  const tipoSemana = seleccion ? seleccion.value : "sin tipo";
const productoSemana = { nombre: `Bowl de la semana - ${tipoSemana}`, precio: 18000, cantidad: 1 };
if (!carrito.some(item => productosIguales(item, productoSemana))) {
  carrito.push(productoSemana);
}
} else {


// ‚úÖ Bowl personalizado
// Recolectar cantidades
const basesIds = ['base1', 'base2', 'base3', 'base4'];
const basesNombres = ['Arroz', 'Arroz integral', 'Pasta corta', 'Lechuga'];
const protIds = ['prot1','prot2','prot3','prot4','prot5','prot6','prot7','prot8','prot9','prot10'];
const protNombres = [
  'Carne ropa vieja', 'Pollo a la plancha en cubos', 'Pechuga en aj√≠ de gallina', 'Carne a la plancha en cubos',
  'Alb√≥ndigas', 'Cerdo a la plancha BBQ en cubos', 'Tartar de pollo', 'Carne vegana (base de lentejas)', 'Pollo vegano (base de garbanzo)', 'Rollitos primavera'
];
const topIds = [
  'top1','top2','top3','top4','top5','top6','top7','top8','top9','top10',
  'top11','top12','top13','top14','top15'
];
const topNombres = [
  "Pico de gallo", "Ma√≠z tierno", "Guacamole", "Lechuga en julianas",
  "Sour cream", "Pimentones", "Queso doble crema", "Cebolla de la casa",
  "Zanahoria de la casa", "Pl√°tano maduro", "Jalape√±os", "Frijoles",
  "Pepinillos", "Hogao", "Br√≥coli"
];

// Recoger cantidades
const basesSeleccionadas = basesIds
  .map((id, i) => {
    const cant = parseInt(document.getElementById(id).textContent);
    return cant > 0 ? `${basesNombres[i]} x${cant}` : null;
  })
  .filter(Boolean);

const protSeleccionadas = protIds
  .map((id, i) => {
    const cant = parseInt(document.getElementById(id).textContent);
    return cant > 0 ? `${protNombres[i]} x${cant}` : null;
  })
  .filter(Boolean);

const topSeleccionados = topIds
  .map((id, i) => {
    const cant = parseInt(document.getElementById(id).textContent);
    return cant > 0 ? `${topNombres[i]} x${cant}` : null;
  })
  .filter(Boolean);

// Bebida incluida
const bebidaIncluida = document.getElementById("bebidaBowl")?.value;

// Armar descripci√≥n completa
let descripcion = `Bowl personalizado`;
if (basesSeleccionadas.length > 0) {
  descripcion += `\nBases: ${basesSeleccionadas.join(", ")}`;
}
if (protSeleccionadas.length > 0) {
  descripcion += `\nProte√≠nas: ${protSeleccionadas.join(", ")}`;
}
if (topSeleccionados.length > 0) {
  descripcion += `\nToppings: ${topSeleccionados.join(", ")}`;
}
if (bebidaIncluida) {
  descripcion += `\nBebida incluida: ${bebidaIncluida}`;
}

// Agregar al carrito como un solo √≠tem
const bowl = { nombre: descripcion, precio: 21000, cantidad: 1, tipo: "bowl" };
const existente = carrito.find(item => productosIguales(item, bowl));
if (!existente) {
  carrito.push(bowl);
}


// Luego agregamos los adicionales como √≠tems separados
const adicionales = agregarAdicionalesContadores();
adicionales.forEach(item => {
  if (!carrito.some(i => productosIguales(i, item))) {
    carrito.push(item);
  }
});
}

  } else if (opcion === "sandwich") {
    const tipoSandwich = document.getElementById("tipoSandwich").value;
const sandwich = { nombre: `Sandwich: ${tipoSandwich}`, precio: 19000, cantidad: 1 };
if (!carrito.some(item => productosIguales(item, sandwich))) {
  carrito.push(sandwich);
}

  } else if (opcion === "nachos") {
  const protIds = ['nachoprot1','nachoprot2','nachoprot3','nachoprot4','nachoprot5','nachoprot6','nachoprot7','nachoprot8','nachoprot9','nachoprot10'];
  const protNombres = [
    'Carne ropa vieja', 'Pollo a la plancha', 'Pechuga en aj√≠ de gallina', 'Carne en cubos',
    'Alb√≥ndigas', 'Cerdo BBQ', 'Tartar de pollo', 'Carne vegana', 'Pollo vegano', 'Rollitos primavera'
  ];
  const topIds = ['nachotop1','nachotop2','nachotop3','nachotop4','nachotop5','nachotop6','nachotop7','nachotop8','nachotop9','nachotop10','nachotop11','nachotop12','nachotop13','nachotop14','nachotop15'];
  const topNombres = [
    "Pico de gallo", "Ma√≠z tierno", "Guacamole", "Lechuga en julianas",
    "Sour cream", "Pimentones", "Queso doble crema", "Cebolla de la casa",
    "Zanahoria de la casa", "Pl√°tano maduro", "Jalape√±os", "Frijoles",
    "Pepinillos", "Hogao", "Br√≥coli"
  ];

  const protSeleccionadas = protIds.map((id, i) => {
    const cant = parseInt(document.getElementById(id)?.textContent);
    return cant > 0 ? `${protNombres[i]} x${cant}` : null;
  }).filter(Boolean);

  const topSeleccionados = topIds.map((id, i) => {
    const cant = parseInt(document.getElementById(id)?.textContent);
    return cant > 0 ? `${topNombres[i]} x${cant}` : null;
  }).filter(Boolean);

  if (protSeleccionadas.length === 0) {
    alert("‚ö†Ô∏è Debes seleccionar al menos una prote√≠na para tus nachos.");
    return;
  }

  let descripcion = "Nachos personalizados";
  if (protSeleccionadas.length > 0) descripcion += `\nProte√≠nas: ${protSeleccionadas.join(", ")}`;
  if (topSeleccionados.length > 0) descripcion += `\nToppings: ${topSeleccionados.join(", ")}`;

const nachos = { nombre: descripcion, precio: 17000, cantidad: 1, tipo: "nachos" };
const existente = carrito.find(item => productosIguales(item, nachos));
if (!existente) {
  carrito.push(nachos);
}


  // Adicionales
  const totalProte = protIds.reduce((sum, id) => sum + parseInt(document.getElementById(id).textContent), 0);
if (totalProte > 1) {
  const extraProt = { nombre: `Adicional prote√≠nas (${totalProte - 1})`, precio: 6000 * (totalProte - 1), cantidad: 1 };
  if (!carrito.some(item => productosIguales(item, extraProt))) carrito.push(extraProt);
}

  const totalTops = topIds.reduce((sum, id) => sum + parseInt(document.getElementById(id).textContent), 0);
if (totalTops > 4) {
  const extraTops = { nombre: `Adicional toppings (${totalTops - 4})`, precio: 2500 * (totalTops - 4), cantidad: 1 };
  if (!carrito.some(item => productosIguales(item, extraTops))) carrito.push(extraTops);
}


 } else if (opcion === "papaslocas") {
  // Prote√≠nas de papas
  const protIds = ['papasprot1','papasprot2','papasprot3','papasprot4','papasprot5','papasprot6','papasprot7','papasprot8','papasprot9','papasprot10'];
  const protNombres = [
    'Carne ropa vieja', 'Pollo a la plancha', 'Pechuga en aj√≠ de gallina', 'Carne en cubos',
    'Alb√≥ndigas', 'Cerdo BBQ', 'Tartar de pollo', 'Carne vegana', 'Pollo vegano', 'Rollitos primavera'
  ];
  const protSeleccionadas = protIds
    .map((id, i) => {
      const cant = parseInt(document.getElementById(id).textContent);
      return cant > 0 ? `${protNombres[i]} x${cant}` : null;
    })
    .filter(Boolean);

  const topIds = [
    'papastop1','papastop2','papastop3','papastop4','papastop5','papastop6','papastop7','papastop8','papastop9','papastop10',
    'papastop11','papastop12','papastop13','papastop14','papastop15'
  ];
  const topNombres = [
    "Pico de gallo", "Ma√≠z tierno", "Guacamole", "Lechuga en julianas",
    "Sour cream", "Pimentones", "Queso doble crema", "Cebolla de la casa",
    "Zanahoria de la casa", "Pl√°tano maduro", "Jalape√±os", "Frijoles",
    "Pepinillos", "Hogao", "Br√≥coli"
  ];
  const topSeleccionados = topIds
    .map((id, i) => {
      const cant = parseInt(document.getElementById(id).textContent);
      return cant > 0 ? `${topNombres[i]} x${cant}` : null;
    })
    .filter(Boolean);

  if (protSeleccionadas.length === 0 || topSeleccionados.length === 0) {
    alert("‚ùå Selecciona al menos una prote√≠na y toppings para las Papas Locas");
    return;
  }

  const tipoPapas = document.getElementById("tipoPapasLocas")?.value;
  if (!tipoPapas) {
    alert("‚ùå Por favor, selecciona el tipo de papas locas (Chips o Criollas).");
    return;
  }

  const proteinaPapas = document.querySelector('input[name="proteina-papas"]:checked');
  const proteinaSeleccionadaPapas = proteinaPapas ? proteinaPapas.value : "";

  const toppingsSeleccionadosPapas = [];
  document.querySelectorAll(".topping-papas").forEach(el => {
    const cantidad = parseInt(el.querySelector("span").textContent);
    if (cantidad > 0) {
      toppingsSeleccionadosPapas.push(`${el.dataset.nombre} x${cantidad}`);
    }
  });

  let descripcion = `Papas Locas (${tipoPapas})`;
  if (protSeleccionadas.length > 0) {
    descripcion += `\nProte√≠nas: ${protSeleccionadas.join(", ")}`;
  }
  if (topSeleccionados.length > 0) {
    descripcion += `\nToppings: ${topSeleccionados.join(", ")}`;
  }

  const papaslocas = {
    nombre: descripcion,
    proteina: proteinaSeleccionadaPapas || "sin prote√≠na",
    toppings: [...toppingsSeleccionadosPapas],
    descripcion: descripcion,
    precio: 17000,
    cantidad: 1,
    tipo: "papaslocas"
  };

  const existente = carrito.find(item => productosIguales(item, papaslocas));
  if (!existente) {
    carrito.push(papaslocas);
  

  actualizarCarrito();
}



}
const postreSeleccionado = document.getElementById("adicionPostre").value;
if (postreSeleccionado) {
  const postreExistente = carrito.find(item =>
    item.nombre === `Postre: ${postreSeleccionado}`
  );

  if (!postreExistente) {
    carrito.push({
      nombre: `Postre: ${postreSeleccionado}`,
      precio: 7000,
      cantidad: 1
    });
  }
}
// --- Agregar bebida si se seleccion√≥ ---
const bebida = document.getElementById("adicionBebida").value;
if (bebida) {
  let precioBebida = 0;

  if (bebida.includes("600 ml")) precioBebida = 3500;
  else if (bebida.includes("Coca-Cola original")) precioBebida = 4500;
  else if (bebida.includes("Coca-Cola zero")) precioBebida = 4000;
  else if (bebida.includes("250 ml") || bebida.includes("Pony Malta")) precioBebida = 3000;

  // Verificar si ya existe una bebida igual en el carrito
  const bebidaExistente = carrito.find(
    item => item.nombre === `Bebida: ${bebida}`
  );

  if (!bebidaExistente) {
    carrito.push({
      nombre: `Bebida: ${bebida}`,
      cantidad: 1,
      precio: precioBebida
    });
  }
}

// Papas Artesanales
const adicionPapas = document.getElementById("adicionPapas").value;
if (adicionPapas === "si") {
  const papasExistentes = carrito.find(item => item.nombre === "Papas Artesanales");

  if (!papasExistentes) {
    carrito.push({
      nombre: "Papas Artesanales",
      precio: 5000,
      cantidad: 1
    });
  }
}

// Ensalada Insignia
const adicionEnsalada = document.getElementById("adicionEnsalada").value;
if (adicionEnsalada === "si") {
  const ensaladaExistente = carrito.find(item => item.nombre === "Ensalada Insignia");

  if (!ensaladaExistente) {
    carrito.push({
      nombre: "Ensalada Insignia",
      precio: 7000,
      cantidad: 1
    });
  }
}


  actualizarCarrito();
document.getElementById("seccionPago").classList.remove("hidden");

}



  function actualizarCarrito() {
    const contenedor = document.getElementById("carrito");
    const lista = document.getElementById("listaCarrito");
    const total = document.getElementById("totalCarrito");

    if (carrito.length === 0) {
      contenedor.classList.add("hidden");
      return;
    }

    contenedor.classList.remove("hidden");
    lista.innerHTML = "";
    let suma = 0;

    carrito.forEach((item, index) => {
      suma += item.precio * item.cantidad;
      const li = document.createElement("li");
      li.classList.add("flex", "justify-between", "items-center");
      li.innerHTML = `
  <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center w-full gap-2">
    <div class="text-left text-sm sm:text-base font-medium break-words max-w-[300px]">
      ${item.nombre} x${item.cantidad} - $${item.precio * item.cantidad}
    </div>
    <div class="flex items-center gap-2 min-w-[90px] justify-end">
      <button onclick="cambiarCantidad(${index}, -1)" class="px-2 py-1 bg-gray-200 rounded">-</button>
      <button onclick="cambiarCantidad(${index}, 1)" class="px-2 py-1 bg-gray-200 rounded">+</button>
    </div>
  </div>`;

      lista.appendChild(li);
    });

    total.textContent = `$${suma}`;
  }

  function cambiarCantidad(index, delta) {
    carrito[index].cantidad += delta;
    if (carrito[index].cantidad <= 0) carrito.splice(index, 1);
    actualizarCarrito();
  }
function limitarSeleccionToppings(idContenedor, limite) {
  const checkboxes = document.querySelectorAll(`#${idContenedor} input[type="checkbox"]`);
  checkboxes.forEach(cb => {
    cb.addEventListener("change", () => {
      const seleccionados = Array.from(checkboxes).filter(c => c.checked);
      if (seleccionados.length >= limite) {
        checkboxes.forEach(c => {
          if (!c.checked) c.disabled = true;
        });
      } else {
        checkboxes.forEach(c => c.disabled = false);
      }
    });
  });
}
limitarSeleccionToppings("contenedorToppingsNachos", 4);
limitarSeleccionToppings("contenedorToppingsPapas", 3);
function mostrarImagen(nombreArchivo) {
  const img = document.getElementById("imgSeleccionada");
  if (!nombreArchivo) {
    img.classList.add("hidden");
    img.src = "";
    return;
  }
  img.src = `img/${nombreArchivo}`;
  img.classList.remove("hidden");
}
function mostrarImagenSandwich() {
  const valor = document.getElementById("tipoSandwich").value.toLowerCase();
  const img = document.getElementById("imgSandwich");
  if (!valor) {
    img.classList.add("hidden");
    img.src = "";
  } else {
    img.src = `img/${valor}.jpg`;
    img.classList.remove("hidden");
  }
}



  // üîó INSERTA AQU√ç TU URL DE LA API DE GOOGLE SHEETS:
  const SHEETS_API_URL = "https://script.google.com/macros/s/AKfycbw-r9bFqE4hexMgx17z_DypU2d-syurAq4fVRuTZUTFnbd60XSkjwywuJQ6DU12cljOJQ/exec";

function confirmarPedidoFinal() {
  const nombreInput = document.getElementById("nombre");
  const telefonoInput = document.getElementById("telefono");
  const universidadSelect = document.getElementById("universidad");
  const horaSelect = document.getElementById("hora");

  if (
    !nombreInput.value.trim() ||
    !telefonoInput.value.trim() ||
    !universidadSelect.value ||
    !horaSelect.value
  ) {
    alert("‚ùå Faltan datos del cliente.");
    return;
  }

  if (carrito.length === 0) {
    alert("‚ùå El carrito est√° vac√≠o.");
    return;
  }

  const fecha = new Date();
  const pedido = {
    fecha: fecha.toLocaleDateString(),
    nombre: nombreInput.value.trim(),
    telefono: telefonoInput.value.trim(),
    hora: horaSelect.value,
    universidad: universidadSelect.value,
    items: carrito,
    total: parseInt(document.getElementById("totalCarrito").textContent.replace("$", "").replace(".", ""))
  };

  fetch(SHEETS_API_URL, {
    method: "POST",
    mode: "no-cors",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(pedido)
  })
    .then(() => {
      alert("‚úÖ Pedido enviado correctamente.");

      // üßº Limpiar inputs
      nombreInput.value = "";
      telefonoInput.value = "";
      universidadSelect.value = "";
      horaSelect.value = "";

      // üõí Limpiar carrito
      carrito = [];
      actualizarCarrito();

      // ‚ùå Ocultar confirmaci√≥n
      document.getElementById("seccionConfirmacion").classList.add("hidden");
    })
    .catch((error) => {
      alert("‚ùå Error al enviar el pedido.");
      console.error(error);
    });
}


function generarCheckboxToppings(tipo) {
  const toppings = [
    "Pico de gallo", "Ma√≠z tierno", "Guacamole", "Lechuga en julianas",
    "Sour cream", "Pimentones", "Queso doble crema", "Cebolla de la casa",
    "Zanahoria de la casa", "Pl√°tano maduro", "Jalape√±os", "Frijoles",
    "Pepinillos", "Hogao", "Br√≥coli"
  ];

  return toppings.map((top, index) => `
    <label class="flex items-center">
      <input type="checkbox" name="topping-${tipo}" value="${top}" class="mr-2" />
      ${top}
    </label>`).join("");
}
function mostrarImagenSandwich() {
  const valor = document.getElementById("tipoSandwich").value.toLowerCase();
  mostrarImagen(`${valor}.jpg`);
}
// Mostrar imagen espec√≠fica de postre sin afectar otras
document.getElementById("adicionPostre").addEventListener("change", function () {
  const valor = this.value;
  const img = document.getElementById("imgPostreSeleccionado");

  if (!valor) {
    img.src = "";
    img.classList.add("hidden");
  } else {
    let archivo = "";
    if (valor === "Lim√≥n") archivo = "postrelimon.jpg";
    else if (valor === "Maracuy√°") archivo = "postremaracuya.jpg";
    else if (valor === "Frutos rojos") archivo = "postrefrutosrojos.jpg";
    else if (valor === "Limonada de coco") archivo = "postrecoco.jpg";

    img.src = `img/${archivo}`;
    img.classList.remove("hidden");
  }
});
const enlacesWhatsapp = {
  javeriana: "https://chat.whatsapp.com/KFd1wyeczfL4ABEko0qBtl",
  andes: "https://chat.whatsapp.com/IYCOFzEm7XzDtkILQLrTdr",
  externado: "https://chat.whatsapp.com/C8l5ERfLm9A0twrlAgufpU",
  distrital: "https://chat.whatsapp.com/GVpwc0jjWSg8BbdCXioORz",
  terpel: "https://chat.whatsapp.com/G870t4PQDU561ozvqHw7xt",
  empresarial: "https://chat.whatsapp.com/HezhTOVaeUjAzFLApKw9Tn"
};
function generarControlesProteinas(prefix = "") {
  const nombres = [
    'Carne ropa vieja', 'Pollo a la plancha', 'Pechuga en aj√≠ de gallina',
    'Carne en cubos', 'Alb√≥ndigas', 'Cerdo BBQ', 'Tartar de pollo',
    'Carne vegana', 'Pollo vegano', 'Rollitos primavera'
  ];

  return nombres.map((nombre, i) => `
    <div class="flex justify-between items-center">
      <span>${nombre}</span>
      <div class="flex items-center gap-2">
        <button onclick="cambiar('${prefix}${i+1}', -1)" class="px-2 bg-gray-200 rounded">‚àí</button>
        <span id="${prefix}${i+1}" class="min-w-[20px] text-center">0</span>
        <button onclick="cambiar('${prefix}${i+1}', 1)" class="px-2 bg-gray-200 rounded">+</button>
      </div>
    </div>
  `).join("");
}
function generarControlesToppings(prefix = "") {
  const nombres = [
    "Pico de gallo", "Ma√≠z tierno", "Guacamole", "Lechuga en julianas",
    "Sour cream", "Pimentones", "Queso doble crema", "Cebolla de la casa",
    "Zanahoria de la casa", "Pl√°tano maduro", "Jalape√±os", "Frijoles",
    "Pepinillos", "Hogao", "Br√≥coli"
  ];

  return nombres.map((nombre, i) => `
    <div class="flex justify-between items-center">
      <span>${nombre}</span>
      <div class="flex items-center gap-2">
        <button onclick="cambiar('${prefix}${i+1}', -1)" class="px-2 bg-gray-200 rounded">‚àí</button>
        <span id="${prefix}${i+1}" class="min-w-[20px] text-center">0</span>
        <button onclick="cambiar('${prefix}${i+1}', 1)" class="px-2 bg-gray-200 rounded">+</button>
      </div>
    </div>
  `).join("");
}
function agregarSiNoExiste(item) {
  const igual = carrito.find(existing => productosIguales(existing, item));

  if (igual) {
    igual.cantidad += item.cantidad;
  } else {
    carrito.push(item);
  }
}

function arraysIguales(arr1, arr2) {
  if (!Array.isArray(arr1) || !Array.isArray(arr2)) return false;
  if (arr1.length !== arr2.length) return false;
  const sorted1 = [...arr1].sort();
  const sorted2 = [...arr2].sort();
  return sorted1.every((val, index) => val === sorted2[index]);
}

function productosIguales(a, b) {
  // Comparar tipo y nombre (muy importantes)
  if (a.tipo !== b.tipo || a.nombre !== b.nombre) return false;

  // Comparar precio si aplica
  if (a.precio !== b.precio) return false;

  // Comparar prote√≠na
  if (a.proteina !== b.proteina) return false;

  // Comparar base (singular) y bases (plural)
  if (a.base !== b.base) return false;
  if (!arraysIguales(a.bases || [], b.bases || [])) return false;

  // Comparar bebida
  if (a.bebida !== b.bebida) return false;

  // Comparar toppings
  if (!arraysIguales(a.toppings || [], b.toppings || [])) return false;

  // Comparar adicionales
  if (!arraysIguales(a.adicionales || [], b.adicionales || [])) return false;

  // Comparar postre y ensalada si se agregan solos
  if (a.postre !== b.postre) return false;
  if (a.ensalada !== b.ensalada) return false;

  return true;
}
 document.addEventListener("DOMContentLoaded", () => {
  const modoDev = true; // ‚Üê CAMBIA a true para producci√≥n

  const cuentaRegresiva = document.getElementById("pantallaCuentaRegresiva");
  const bienvenida = document.getElementById("pantallaBienvenida");
  const cuerpo = document.body;

  if (modoDev) {
    cuentaRegresiva.classList.add("hidden");
    bienvenida.classList.remove("hidden");
    cuerpo.classList.remove("overflow-hidden");
  } else {
    const fechaObjetivo = new Date("2025-07-21T23:59:59").getTime();

    const intervalo = setInterval(() => {
      const ahora = new Date().getTime();
      const diferencia = fechaObjetivo - ahora;

      if (diferencia <= 0) {
        clearInterval(intervalo);
        cuentaRegresiva.classList.add("hidden");
        bienvenida.classList.remove("hidden");
        cuerpo.classList.remove("overflow-hidden");
        return;
      }

      const dias = Math.floor(diferencia / (1000 * 60 * 60 * 24));
      const horas = Math.floor((diferencia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutos = Math.floor((diferencia % (1000 * 60 * 60)) / (1000 * 60));
      const segundos = Math.floor((diferencia % (1000 * 60)) / 1000);

      document.getElementById("cuentaRegresiva").innerText =
        `${dias}d ${horas}h ${minutos}m ${segundos}s`;
    }, 1000);
  }

  // Mostrar contenido principal al presionar "Entrar"
  window.mostrarContenido = function () {
    bienvenida.classList.add("hidden");
    document.getElementById("contenidoPrincipal").classList.remove("hidden");
    cuerpo.classList.remove("overflow-hidden");
  };
});
</script>

</body>
</html>